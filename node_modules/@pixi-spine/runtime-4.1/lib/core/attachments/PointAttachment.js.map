{"version":3,"file":"PointAttachment.js","sources":["../../../src/core/attachments/PointAttachment.ts"],"sourcesContent":["import { Attachment, VertexAttachment } from './Attachment';\nimport { AttachmentType, Color, MathUtils, Vector2 } from '@pixi-spine/base';\nimport type { Bone } from '../Bone';\n\n/**\n * @public\n */\nexport class PointAttachment extends VertexAttachment {\n    type = AttachmentType.Point;\n\n    x = 0;\n    y = 0;\n    rotation = 0;\n\n    /** The color of the point attachment as it was in Spine. Available only when nonessential data was exported. Point attachments\n     * are not usually rendered at runtime. */\n    color = new Color(0.38, 0.94, 0, 1);\n\n    constructor(name: string) {\n        super(name);\n    }\n\n    computeWorldPosition(bone: Bone, point: Vector2) {\n        const mat = bone.matrix;\n\n        point.x = this.x * mat.a + this.y * mat.c + bone.worldX;\n        point.y = this.x * mat.b + this.y * mat.d + bone.worldY;\n\n        return point;\n    }\n\n    computeWorldRotation(bone: Bone) {\n        const mat = bone.matrix;\n        const cos = MathUtils.cosDeg(this.rotation);\n        const sin = MathUtils.sinDeg(this.rotation);\n        const x = cos * mat.a + sin * mat.c;\n        const y = cos * mat.b + sin * mat.d;\n\n        return Math.atan2(y, x) * MathUtils.radDeg;\n    }\n\n    copy(): Attachment {\n        const copy = new PointAttachment(this.name);\n\n        copy.x = this.x;\n        copy.y = this.y;\n        copy.rotation = this.rotation;\n        copy.color.setFromColor(this.color);\n\n        return copy;\n    }\n}\n"],"names":["VertexAttachment","AttachmentType","Color","MathUtils"],"mappings":";;;;;AAOO,MAAM,wBAAwBA,2BAAiB,CAAA;AAAA,EAWlD,YAAY,IAAc,EAAA;AACtB,IAAA,KAAA,CAAM,IAAI,CAAA,CAAA;AAXd,IAAA,IAAA,CAAA,IAAA,GAAOC,mBAAe,CAAA,KAAA,CAAA;AAEtB,IAAI,IAAA,CAAA,CAAA,GAAA,CAAA,CAAA;AACJ,IAAI,IAAA,CAAA,CAAA,GAAA,CAAA,CAAA;AACJ,IAAW,IAAA,CAAA,QAAA,GAAA,CAAA,CAAA;AAIX;AAAA;AAAA,IAAA,IAAA,CAAA,KAAA,GAAQ,IAAIC,UAAA,CAAM,IAAM,EAAA,IAAA,EAAM,GAAG,CAAC,CAAA,CAAA;AAAA,GAIlC;AAAA,EAEA,oBAAA,CAAqB,MAAY,KAAgB,EAAA;AAC7C,IAAA,MAAM,MAAM,IAAK,CAAA,MAAA,CAAA;AAEjB,IAAM,KAAA,CAAA,CAAA,GAAI,KAAK,CAAI,GAAA,GAAA,CAAI,IAAI,IAAK,CAAA,CAAA,GAAI,GAAI,CAAA,CAAA,GAAI,IAAK,CAAA,MAAA,CAAA;AACjD,IAAM,KAAA,CAAA,CAAA,GAAI,KAAK,CAAI,GAAA,GAAA,CAAI,IAAI,IAAK,CAAA,CAAA,GAAI,GAAI,CAAA,CAAA,GAAI,IAAK,CAAA,MAAA,CAAA;AAEjD,IAAO,OAAA,KAAA,CAAA;AAAA,GACX;AAAA,EAEA,qBAAqB,IAAY,EAAA;AAC7B,IAAA,MAAM,MAAM,IAAK,CAAA,MAAA,CAAA;AACjB,IAAA,MAAM,GAAM,GAAAC,cAAA,CAAU,MAAO,CAAA,IAAA,CAAK,QAAQ,CAAA,CAAA;AAC1C,IAAA,MAAM,GAAM,GAAAA,cAAA,CAAU,MAAO,CAAA,IAAA,CAAK,QAAQ,CAAA,CAAA;AAC1C,IAAA,MAAM,CAAI,GAAA,GAAA,GAAM,GAAI,CAAA,CAAA,GAAI,MAAM,GAAI,CAAA,CAAA,CAAA;AAClC,IAAA,MAAM,CAAI,GAAA,GAAA,GAAM,GAAI,CAAA,CAAA,GAAI,MAAM,GAAI,CAAA,CAAA,CAAA;AAElC,IAAA,OAAO,IAAK,CAAA,KAAA,CAAM,CAAG,EAAA,CAAC,IAAIA,cAAU,CAAA,MAAA,CAAA;AAAA,GACxC;AAAA,EAEA,IAAmB,GAAA;AACf,IAAA,MAAM,IAAO,GAAA,IAAI,eAAgB,CAAA,IAAA,CAAK,IAAI,CAAA,CAAA;AAE1C,IAAA,IAAA,CAAK,IAAI,IAAK,CAAA,CAAA,CAAA;AACd,IAAA,IAAA,CAAK,IAAI,IAAK,CAAA,CAAA,CAAA;AACd,IAAA,IAAA,CAAK,WAAW,IAAK,CAAA,QAAA,CAAA;AACrB,IAAK,IAAA,CAAA,KAAA,CAAM,YAAa,CAAA,IAAA,CAAK,KAAK,CAAA,CAAA;AAElC,IAAO,OAAA,IAAA,CAAA;AAAA,GACX;AACJ;;;;"}